window.__require=function e(t,i,n){function o(r,a){if(!i[r]){if(!t[r]){var h=r.split("/");if(h=h[h.length-1],!t[h]){var c="function"==typeof __require&&__require;if(!a&&c)return c(h,!0);if(s)return s(h,!0);throw new Error("Cannot find module '"+r+"'")}r=h}var p=i[r]={exports:{}};t[r][0].call(p.exports,function(e){return o(t[r][1][e]||e)},p,p.exports,e,t,i,n)}return i[r].exports}for(var s="function"==typeof __require&&__require,r=0;r<n.length;r++)o(n[r]);return o}({bottle:[function(e,t){"use strict";cc._RF.push(t,"425c4clo5tN8pjIFHYKHKWh","bottle"),cc.Class({extends:cc.Component,properties:{liquid:cc.Node,stars:cc.Node,sceneTime:{default:0,visible:!1},sanxing:cc.Label,erxing:cc.Label,yixing:cc.Label,donghua:{default:"",visible:!1}},onLoad:function(){},start:function(){},update:function(){var e=this.node.parent.getComponent("scene"),t=e.roundTime[e.rNum-1];this.sanxing.string=t-Math.round(.8*t)+"s",this.erxing.string=t-Math.round(.6*t)+"s",this.yixing.string=t-Math.round(.4*t)+"s",this.contolLiquid()},contolLiquid:function(){if(this.node.parent.getComponent("scene").round){var e=this.node.parent.getComponent("scene").bottleTime;this.liquid.getComponent(cc.Sprite).fillRange=1-e/this.sceneTime;var t=this.liquid.getComponent(cc.Sprite).fillRange;if(t>.8){for(var i=0;i<this.stars.children[2].children.length;i++)this.stars.children[2].children[i].children[1].active=!0;for(var n=0;n<this.stars.children[1].children.length;n++)this.stars.children[1].children[n].children[1].active=!0;this.stars.children[0].children[0].children[1].active=!0,this.donghua="\u4e09\u661f"}else if(t<.8&&t>.6){for(var o=0;o<this.stars.children[2].children.length;o++)this.stars.children[2].children[o].children[1].active=!1;for(var s=0;s<this.stars.children[1].children.length;s++)this.stars.children[1].children[s].children[1].active=!0;this.stars.children[0].children[0].children[1].active=!0,this.donghua="\u4e8c\u661f"}else if(t<.6&&t>.4){for(var r=0;r<this.stars.children[1].children.length;r++)this.stars.children[1].children[r].children[1].active=!1;this.stars.children[0].children[0].children[1].active=!0,this.donghua="\u4e00\u661f"}else t<.4&&(this.stars.children[0].children[0].children[1].active=!1)}},gameStop:function(){if(!this.node.parent.getChildByName("stopBoard")&&this.node.parent.getComponent("scene").round){var e=this.node.parent.getComponent("scene");e.playaduio("music/dianji"),e.gameStop=!1,this.node.children[2].children[1].active=!0,this.node.children[2].children[0].active=!1,this.node.parent.getComponent("scene").pop()}},gameStart:function(){if(!this.node.parent.getChildByName("stopBoard")&&this.node.parent.getComponent("scene").round){var e=this.node.parent.getComponent("scene");e.playaduio("music/dianji"),e.gameStop=!0,this.node.children[2].children[1].active=!1,this.node.children[2].children[0].active=!0}}}),cc._RF.pop()},{}],kepu:[function(e,t){"use strict";cc._RF.push(t,"17f1c4YLRRD44oZbePpD+T4","kepu");var i=e("numProp"),n=e("./numProp");cc.Class({extends:cc.Component,properties:{body:cc.Label,title:cc.Label},onLoad:function(){var e=Math.round(Math.random()*i.kepuList.length-1);this.body.string=i.kepuList[e],this.title.string=i.titleList[e]},start:function(){},update:function(){},del:function(){this.node.parent.getComponent("scene").gameStop=!0;var e=this.node.parent.getComponent("scene");switch(this.node.active=!1,e.isProp){case"\u63d0\u793a":e.Tips[0].getComponent("qizi").Light(!0),e.Tips[1].getComponent("qizi").Light(!0),(0,n.getData)().propTipNum-=1,(0,n.saveData)();break;case"\u4e71\u5e8f":e.resetTishi(),e.propSort.sort(function(){return Math.random()-.5});for(var t=0;t<e.round.children.length;t++)e.round.children[t].setPosition(e.propSort[t][0],e.propSort[t][1]);e.tishi(),(0,n.getData)().propLuanXuNum-=1,(0,n.saveData)();break;case"\u70b8\u5f39":2==e.Tips.length&&(e.onClick(e.Tips[0]),e.onClick(e.Tips[1]),(0,n.getData)().propBoomNum-=1,(0,n.saveData)());break;case"\u65f6\u505c":e.timeStop=!1,this.scheduleOnce(function(){e.timeStop=!0},Math.round(.15*e.roundTime[e.rNum-1])),(0,n.getData)().propTimeStopNum-=1,(0,n.saveData)();break;case"\u52a0\u65f6":e.time.string=parseInt(e.time.string)+Math.round(.15*e.roundTime[e.rNum-1]),e.bottleTime=e.bottleTime-Math.round(.15*e.roundTime[e.rNum-1]),(0,n.getData)().propTimeNum-=1,(0,n.saveData)()}this.node.parent.removeChild(this.node)}}),cc._RF.pop()},{"./numProp":"numProp",numProp:"numProp"}],loading:[function(e,t){"use strict";cc._RF.push(t,"6861bBQVC5NArAx310PrgmS","loading");var i=e("./numProp");cc.Class({extends:cc.Component,properties:{progressBar:cc.Node,baifenbi:cc.Label,jindu:0,popObj:{type:Object,visible:!1,default:{}}},onLoad:function(){this.progressBar.getComponent(cc.Sprite).fillRange=0,this.popObj={propTipNum:5,propLuanXuNum:5,propBoomNum:5,propTimeStopNum:5,propTimeNum:5,score:0}},start:function(){},update:function(e){this.jindu<3&&(this.jindu=e+this.jindu,this.progressBar.getComponent(cc.Sprite).fillRange=this.jindu/3,this.baifenbi.string=Math.floor(this.jindu/3*100)+"%"),3==Math.floor(this.jindu)&&(this.node.children[1].active=!1)},denglu:function(){this.node.parent.getComponent("scene").gameStop=!0;for(var e=0;e<this.node.parent.children.length;e++)this.node.parent.children[e].active=!0;cc.loader.loadRes("music/dianji",function(e,t){this._audioId=cc.audioEngine.play(t,!1,1)}),(0,i.setData)(this.popObj),(0,i.saveData)(),this.node.parent.removeChild(this.node)}}),cc._RF.pop()},{"./numProp":"numProp"}],numProp:[function(e,t,i){"use strict";var n;cc._RF.push(t,"47b68OPh9pMFqnTSUv6FaUh","numProp"),i.__esModule=!0,i.saveData=function(){var e=JSON.stringify(n);localStorage.setItem("test",e)},i.setData=function(e){n=e},i.setDP=function(e,t){n[e]=t},i.getData=function(){return n},i.titleList=i.kepuList=void 0;var o=localStorage.getItem("test");i.kepuList=["\u8fd9\u662f\u7b2c\u4e00\u4e2a","\u8fd9\u662f\u7b2c2\u4e2a","\u8fd9\u662f\u7b2c3\u4e2a","\u8fd9\u662f\u7b2c4\u4e2a","\u8fd9\u662f\u7b2c5\u4e2a"],i.titleList=["1","2","3","4","5"],o?(o=JSON.parse(o),n=o):n={propTipNum:5,propLuanXuNum:5,propBoomNum:5,propTimeStopNum:5,propTimeNum:5,score:0},cc._RF.pop()},{}],popUp:[function(e,t){"use strict";cc._RF.push(t,"88935bjVGNOO7CfPm8CsTAU","popUp");var i=e("./numProp");cc.Class({extends:cc.Component,properties:{starAnimation:cc.Prefab,overScore:cc.Label,failOverScore:cc.Label,donghua:cc.Node,popObj:{type:Object,visible:!1,default:{}}},onLoad:function(){this.popObj={propTipNum:5,propLuanXuNum:5,propBoomNum:5,propTimeStopNum:5,propTimeNum:5,score:0}},start:function(){var e=this.node.parent.getChildByName("\u74f6\u5b50\u548c\u677f\u5b50").getComponent("bottle");if(this.node.parent.getChildByName("gameAdopt"))switch(e.donghua){case"\u4e09\u661f":this.donghua.getComponent("sp.Skeleton").setAnimation(1,"sl3_1",!1),this.donghua.getComponent("sp.Skeleton").addAnimation(1,"sl3_2",!0);break;case"\u4e8c\u661f":this.donghua.getComponent("sp.Skeleton").setAnimation(1,"sl2_1",!1),this.donghua.getComponent("sp.Skeleton").addAnimation(1,"sl2_2",!0);break;case"\u4e00\u661f":this.donghua.getComponent("sp.Skeleton").setAnimation(1,"sl1_1",!1),this.donghua.getComponent("sp.Skeleton").addAnimation(1,"sl1_2",!0)}},update:function(){},singOut:function(){var e=this.node.parent.getComponent("scene");e.playaduio("music/dianji"),e.round&&(e.gameOver(),this.node.parent.removeChild(this.node),e.getRound(1),e.rNum=1,(0,i.setData)(this.popObj),(0,i.saveData)())},againRound:function(){var e=this.node.parent.getComponent("scene");e.playaduio("music/dianji"),e.round&&(e.gameOver(),e.getRound(e.rNum),this.node.parent.removeChild(this.node))},roundOverPop:function(){var e=this.node.parent.getComponent("scene");e.playaduio("music/dianji"),e.rNum=e.rNum-1,e.getRound(e.rNum),e.gameStop=!0,this.node.parent.getChildByName("\u74f6\u5b50\u548c\u677f\u5b50").children[2].children[0].active=!0,this.node.parent.getChildByName("\u74f6\u5b50\u548c\u677f\u5b50").children[2].children[1].active=!1,this.node.parent.removeChild(this.node)},nextRound:function(){var e=this.node.parent.getComponent("scene");e.playaduio("music/dianji"),e.getRound(e.rNum),e.gameStop=!0,this.node.parent.getChildByName("\u74f6\u5b50\u548c\u677f\u5b50").children[2].children[0].active=!0,this.node.parent.getChildByName("\u74f6\u5b50\u548c\u677f\u5b50").children[2].children[1].active=!1,this.node.parent.removeChild(this.node)},failAgagin:function(){var e=this.node.parent.getComponent("scene");e.playaduio("music/dianji"),this.node.parent.getChildByName("\u74f6\u5b50\u548c\u677f\u5b50").children[2].children[0].active=!0,this.node.parent.getChildByName("\u74f6\u5b50\u548c\u677f\u5b50").children[2].children[1].active=!1,this.node.parent.removeChild(this.node),e.gameStop=!0,e.rNum=1,e.getRound(e.rNum)},del:function(){var e=this.node.parent.getComponent("scene");e.playaduio("music/dianji"),e.gameStop=!0,this.node.parent.getChildByName("\u74f6\u5b50\u548c\u677f\u5b50").children[2].children[0].active=!0,this.node.parent.getChildByName("\u74f6\u5b50\u548c\u677f\u5b50").children[2].children[1].active=!1,this.node.parent.removeChild(this.node)},stopyinyue:function(){var e=this.node.parent.getComponent("scene");e.bg_music?(e.audioOff(e.bg_audio_id),e.bg_music=!1,this.node.children[3].children[1].children[1].active=!1,this.node.children[3].children[1].children[0].active=!0):(e.audioOn(e.bg_audio_id),e.bg_music=!0,this.node.children[3].children[1].children[1].active=!0,this.node.children[3].children[1].children[0].active=!1)},stopyinxiao:function(){var e=this.node.parent.getComponent("scene");e.key?(e.key=!1,this.node.children[3].children[0].children[1].active=!1,this.node.children[3].children[0].children[0].active=!0):(e.key=!0,this.node.children[3].children[0].children[1].active=!0,this.node.children[3].children[0].children[0].active=!1)}}),cc._RF.pop()},{"./numProp":"numProp"}],propWarehouse:[function(e,t){"use strict";cc._RF.push(t,"c492ecNH/9KtpO16V8xosmz","propWarehouse");var i=e("./numProp");cc.Class({extends:cc.Component,properties:{propTipNum:cc.Label,propLuanXuNum:cc.Label,propBoomNum:cc.Label,propTimeStopNum:cc.Label,propTimeNum:cc.Label},onLoad:function(){},start:function(){},update:function(){this.propDisplay()},propDisplay:function(){(0,i.getData)().propTipNum>99?this.propTipNum.string="...":(0,i.getData)().propTipNum<=99&&(this.propTipNum.string=(0,i.getData)().propTipNum),(0,i.getData)().propLuanXuNum>99?this.propLuanXuNum.string="...":(0,i.getData)().propLuanXuNum<=99&&(this.propLuanXuNum.string=(0,i.getData)().propLuanXuNum),(0,i.getData)().propBoomNum>99?this.propBoomNum.string="...":(0,i.getData)().propBoomNum<=99&&(this.propBoomNum.string=(0,i.getData)().propBoomNum),(0,i.getData)().propTimeStopNum>99?this.propTimeStopNum.string="...":(0,i.getData)().propTimeStopNum<=99&&(this.propTimeStopNum.string=(0,i.getData)().propTimeStopNum),(0,i.getData)().propTimeNum>99?this.propTimeNum.string="...":(0,i.getData)().propTimeNum<=99&&(this.propTimeNum.string=(0,i.getData)().propTimeNum)},propTip:function(){if((0,i.getData)().propTipNum>0&&this.node.parent.getComponent("scene").gameStop&&this.node.parent.getComponent("scene").round){this.knowledge();var e=this.node.parent.getComponent("scene");e.isProp="\u63d0\u793a",e.playaduio("music/dianji")}},propLuanXu:function(){if((0,i.getData)().propLuanXuNum>0&&this.node.parent.getComponent("scene").gameStop&&this.node.parent.getComponent("scene").round){this.knowledge();var e=this.node.parent.getComponent("scene");e.isProp="\u4e71\u5e8f",e.playaduio("music/dianji")}},propBoom:function(){if((0,i.getData)().propBoomNum>0&&this.node.parent.getComponent("scene").gameStop&&this.node.parent.getComponent("scene").round){this.knowledge();var e=this.node.parent.getComponent("scene");e.isProp="\u70b8\u5f39",e.playaduio("music/dianji")}},propTimeStop:function(){if((0,i.getData)().propTimeStopNum>0&&this.node.parent.getComponent("scene").gameStop&&this.node.parent.getComponent("scene").round){this.knowledge();var e=this.node.parent.getComponent("scene");e.playaduio("music/dianji"),e.isProp="\u65f6\u505c"}},propTime:function(){if((0,i.getData)().propTimeNum>0&&this.node.parent.getComponent("scene").gameStop&&this.node.parent.getComponent("scene").round){this.knowledge();var e=this.node.parent.getComponent("scene");e.playaduio("music/dianji"),e.isProp="\u52a0\u65f6"}},clickIncrease:function(){if(!this.node.parent.getChildByName("shangcheng")&&!this.node.parent.getChildByName("stopBoard")){var e=this.node.parent;this.node.parent.getComponent("scene").playaduio("music/dianji"),cc.resources.load("prefab/shangcheng",function(t,i){if(t)console.log(t);else if(i){var n=cc.instantiate(i);n.setParent(e),n.setPosition(0,0)}}),e.getComponent("scene").gameStop=!1}},knowledge:function(){cc.resources.load("prefab/\u5c0f\u79d1\u666e",function(e,t){e?console.log(e):t&&(cc.instantiate(t).setParent(this.node.parent),this.node.parent.getComponent("scene").gameStop=!1)}.bind(this))}}),cc._RF.pop()},{"./numProp":"numProp"}],qizi:[function(e,t,i){"use strict";cc._RF.push(t,"eb4f5B9OWJDXq8jxpZ4M/mO","qizi"),i.__esModule=!0,i.default=void 0;var n=cc.Class({name:"qizi",extends:cc.Component,properties:{sprite:""},onLoad:function(){},start:function(){},update:function(){},setSprite:function(e){this.node.getComponent(cc.Sprite).spriteFrame=e},click:function(){this.node.parent.parent.getComponent("scene").onClick(this.node)},Light:function(e){void 0===e&&(e=!this.node.children[0].active),this.node.children[0].width=105,this.node.children[0].height=105,this.node.children[0].active=e}});i.default=n,t.exports=i.default,cc._RF.pop()},{}],scene:[function(e,t){"use strict";cc._RF.push(t,"7c41do+KOxKF6WHJcTrlX50","scene");var i=e("./numProp");Number.prototype.inRange=function(e,t){var i=this+0;return e>t?i<=e&&i>=t:i<=t&&i>=e},cc.Class({extends:cc.Component,name:"scene",properties:{demo:{type:cc.Prefab,default:null},round:{type:cc.Node,default:null,visible:!1},zaiSheng:cc.Prefab,wiring:cc.Prefab,props:cc.Prefab,bottle:cc.Prefab,time:cc.Label,fenshu:cc.Label,guanqia:cc.Label,Qsize:0,timeStop:!0,gameStop:!1,tipTime:{default:0,visible:!1},bottleTime:{default:0,visible:!1},regenerate:{default:0,visible:!1},num:{default:0,visible:!1},rNum:{default:1,visible:!1},overNum:{default:0,visible:!1},roundTime:{default:[],type:Array,visible:!1},demoFace:{default:[],type:Array,visible:!1},line:[],Tips:[],propSort:[],click:[],bg_audio_id:{default:0,type:Number,visible:!1},audioId:{default:0,type:Number,visible:!1},key:{default:!0,type:Boolean,visible:!1},bg_music:{default:!0,type:Boolean,visible:!1},popObj:{type:Object,visible:!1,default:{}},faceType:{type:String,visible:!1,default:"18"},isProp:{type:String,visible:!1,default:""}},onLoad:function(){var e=this;this.demoFace=[6,6,6,7,7,7,8,8,8,8,9,9,9,10,10,10,10,11,11,11,11,12,12,12,12,13,13,13,14,14,14,14,15,15,15,15,15,16,16,16,16,16,16,17,17,17,18,18,18,18],this.roundTime=[25,35,40,45,55,55,46,49,51,51,52,52,47,39,41,46,48,49,54,54,57,58,60,65,65,61,63,66,69,72,74,74,77,80,80,85,87,88,86,88,93,95,98,101,103,106,107,109,112,114],this.popObj={propTipNum:5,propLuanXuNum:5,propBoomNum:5,propTimeStopNum:5,propTimeNum:5,score:0},this.progress(),this.scheduleOnce(function(){e.loading(),e.getRound(e.rNum)},1)},start:function(){this.schedule(this.doCountdownTime,1)},update:function(){this.neverDie(),this.isWin()},audioOn:function(e){cc.audioEngine.resume(e)},audioOff:function(e){cc.audioEngine.pause(e)},uncache:function(e){cc.audioEngine.uncache(e)},playaduio:function(e){this.key&&cc.loader.loadRes(e,cc.AudioClip,function(e,t){this.audioId=cc.audioEngine.play(t,!1,1)}.bind(this))},progress:function(){cc.loader.loadRes("music/background",cc.AudioClip,function(e,t){this.bg_audio_id=cc.audioEngine.play(t,!0,1)}.bind(this)),cc.resources.load("prefab/\u767b\u9646",function(e,t){e?console.log(e):t&&cc.instantiate(t).setParent(this.node)}.bind(this))},loading:function(){var e=this.node;cc.resources.load("prefab/\u74f6\u5b50\u548c\u677f\u5b50",function(t,i){if(t)console.log(t);else if(i){var n=cc.instantiate(i);n.setParent(e),n.active=!1}}),cc.resources.load("prefab/\u9053\u5177\u7ec4",function(t,i){if(t)console.log(t);else if(i){var n=cc.instantiate(i);n.setParent(e),n.active=!1}})},getRound:function(e){switch(e>50?cc.resources.load("prefab/\u901a\u5173",function(e,t){if(e)console.log(e);else if(t){var i=cc.instantiate(t);i.setParent(this.node),round.setPosition(i.x+60,i.y)}}.bind(this)):e<=50&&(this.time.string=this.roundTime[e-1],cc.resources.load("parts/\u7b2c"+e+"\u5173",function(e,t){if(e)console.log(e);else if(t){var i=cc.instantiate(t);i.setParent(this.node),i.setPosition(i.x+60,i.y),this.round=i,this.transFace(i);for(var n=0;n<this.round.children.length;n++)this.hasQizi(this.round.children[n])&&this.propSort.push([this.round.children[n].position.x,this.round.children[n].position.y]);this.tishi(),this.guanqia.string=this.round.name,this.node.getChildByName("\u74f6\u5b50\u548c\u677f\u5b50").getComponent("bottle").sceneTime=parseInt(this.time.string),this.node.getChildByName("\u767b\u9646")&&(this.round.active=!1)}}.bind(this))),e%4){case 0:this.faceType="72";break;case 1:this.faceType="18";break;case 2:this.faceType="36";break;case 3:this.faceType="54"}},transFace:function(e){for(var t=[];t.length<this.demoFace[this.rNum-1];){var i=this.randomDemo(),n=t.length;if(0==n)t.push(i);else{for(var o=0,s=0;s<n;s++)t[s].name==i.name&&o++;0==o&&t.push(i)}}for(var r=[],a=[],h=0;h<e.children.length;h++)h<e.children.length/2?r.push(e.children[h]):a.push(e.children[h]);r.sort(function(){return Math.random()-.5}),a.sort(function(){return Math.random()-.5});for(var c=0;c<r.length;c++){var p=t[c%t.length];r[c].getComponent("qizi").setSprite(p),r[c].getComponent("qizi").sprite=p.name,a[c].getComponent("qizi").setSprite(p),a[c].getComponent("qizi").sprite=p.name}},randomDemo:function(){return this.demo.data.getChildByName(this.faceType).children[Math.floor(Math.random()*this.demoFace[this.rNum-1])].getComponent(cc.Sprite).spriteFrame},isDirectLink:function(e,t){if(e.x==t.x&&e.y==t.y)return!1;if(e.x.inRange(t.x-this.Qsize/2,t.x+this.Qsize/2)){for(var i=0;i<this.round.children.length;i++)if(this.hasQizi(this.round.children[i])){var n=this.round.children[i];if(n.x.inRange(t.x-this.Qsize/2,t.x+this.Qsize/2)&&n.y.inRange(e.y,t.y)&&n.y!==e.y&&n.y!==t.y)return!1}return this.hasQizi(e)&&this.hasQizi(t)&&(this.line=[e,t]),!0}if(e.y.inRange(t.y-this.Qsize/2,t.y+this.Qsize/2)){for(var o=0;o<this.round.children.length;o++)if(this.hasQizi(this.round.children[o])){var s=this.round.children[o];if(s.y.inRange(t.y-this.Qsize/2,t.y+this.Qsize/2)&&s.x.inRange(e.x,t.x)&&s.x!==e.x&&s.x!==t.x)return!1}return this.hasQizi(e)&&this.hasQizi(t)&&(this.line=[e,t]),!0}},isOneCornerLink:function(e,t){var i={x:e.x,y:t.y},n={x:t.x,y:e.y};if(e.x==t.x||e.y==t.y)return!1;if(this.hasQizi(i)){if(!this.hasQizi(n)&&this.isDirectLink(e,n)&&this.isDirectLink(n,t))return this.line=[],this.line=[e,n,t],!0}else if(this.isDirectLink(e,i)&&this.isDirectLink(i,t))return this.line=[],this.line=[e,i,t],!0},liangci:function(e,t){for(var i=this,n=[],o=-this.round.width/2;o<=this.round.width/2+44;o+=this.Qsize/2){var s={x:o,y:e.y};if(!this.hasQizi(s)){var r={x:o,y:t.y};this.hasQizi(r)||this.isDirectLink(s,e)&&this.isDirectLink(r,t)&&this.isDirectLink(s,r)&&n.push([e,s,r,t])}}for(var a=-this.round.height/2;a<=this.round.height/2+44;a+=this.Qsize/2){var h={x:e.x,y:a};if(!this.hasQizi(h)){var c={x:t.x,y:a};this.hasQizi(c)||this.isDirectLink(h,e)&&this.isDirectLink(c,t)&&this.isDirectLink(h,c)&&n.push([e,h,c,t])}}return n.forEach(function(e){i.line.length<=0&&(i.line=e),0!=i.routeLength(i.line)&&i.routeLength(e)<i.routeLength(i.line)&&(i.line=e)}),n.length>0},islineLink:function(e,t){return e.getComponent("qizi").sprite==t.getComponent("qizi").sprite&&(!!this.isDirectLink(e,t)||!!this.isOneCornerLink(e,t)||this.liangci(e,t))},routeLength:function(e){var t=0;return e.forEach(function(i,n){n<e.length-1&&(i.x==e[n+1].x?t+=Math.abs(i.y-e[n+1].y):i.y==e[n+1].y&&(t+=Math.abs(i.x-e[n+1].x)))}),t},linkRoute:function(e){var t=this;e.forEach(function(i,n){n<e.length-1&&t.isWiring(i,e[n+1])})},isWiring:function(e,t){var i=cc.instantiate(this.wiring);i.setParent(this.round),e.x.inRange(t.x-this.Qsize/2,t.x+this.Qsize/2)&&e.y!=t.y?(i.scaleY=Math.abs(Math.max(e.y,t.y)-Math.min(e.y,t.y))/(4*this.Qsize/3),i.setPosition(e.x,Math.min(e.y,t.y)+Math.abs(Math.max(e.y,t.y)-Math.min(e.y,t.y))/2),i.getComponent(sp.Skeleton).setAnimation(1,"shuxian",!1)):e.y.inRange(t.y-this.Qsize/2,t.y+this.Qsize/2)&&e.x!=t.x&&(i.scaleX=Math.abs(Math.max(e.x,t.x)-Math.min(e.x,t.x))/(4*this.Qsize/3),i.setPosition(Math.min(e.x,t.x)+Math.abs(Math.max(e.x,t.x)-Math.min(e.x,t.x))/2,e.y),i.getComponent("sp.Skeleton").setAnimation(1,"hengxian",!1)),i.active=!0,this.scheduleOnce(function(){i.parent.removeChild(i)},.2)},neverDie:function(){var e=this;if(5==this.regenerate){var t=this.randomDemo(),i=[];if(this.round.children.forEach(function(t){e.hasQizi(t)&&i.length<2&&e.pieceRandom(t)&&(i[0]&&e.pieceRandom(t).x!=i[0].x&&e.pieceRandom(t).y!=i[0].y?i.push(e.pieceRandom(t)):i[0]||i.push(e.pieceRandom(t)))}),2==i.length){var n=cc.instantiate(this.zaiSheng);n.getComponent("qizi").setSprite(t),n.getComponent("qizi").sprite=t.name,n.setParent(this.round),n.setPosition(i[0]),n.angle=-this.round.angle,n.getChildByName("donghua").active=!0,n.getChildByName("donghua").getComponent("sp.Skeleton").setAnimation(1,"shengcheng",!1),n.getComponent(cc.Sprite).enabled=!0;var o=cc.instantiate(this.zaiSheng);o.getComponent("qizi").setSprite(t),o.getComponent("qizi").sprite=t.name,o.setParent(this.round),o.setPosition(i[1]),o.angle=-this.round.angle,o.getChildByName("donghua").active=!0,o.getChildByName("donghua").getComponent("sp.Skeleton").setAnimation(1,"shengcheng",!1),o.getComponent(cc.Sprite).enabled=!0,this.regenerate=0,this.resetTishi()}}},pieceRandom:function(e){var t=[];t.push({n:e,x:e.x,y:e.y+this.Qsize}),t.push({n:e,x:e.x,y:e.y-this.Qsize}),t.push({n:e,x:e.x-this.Qsize,y:e.y}),t.push({n:e,x:e.x+this.Qsize,y:e.y});for(var i=0;i<t.length;i++)if(!this.hasQizi(t[i])&&t[i].x.inRange(-this.round.width/2+1,this.round.width/2-1)&&t[i].y.inRange(-this.round.height/2+1,this.round.height/2-1))return t[i];return null},hasQizi:function(e){for(var t=0;t<this.round.children.length;t++){var i=this.round.children[t];if(i.x.inRange(e.x-this.Qsize/2,e.x+this.Qsize/2)&&i.y.inRange(e.y-this.Qsize/2,e.y+this.Qsize/2)&&"line"!==i.name)return!0}return!1},section:function(e){return Math.random()>.5?e-this.Qsize:e+this.Qsize},isWin:function(){this.round&&0==this.round.children.length&&((0,i.setData)((0,i.getData)()),(0,i.setDP)("score",(0,i.getData)().score+this.num+parseInt(this.time.string)),this.overNum=this.num+parseInt(this.time.string),(0,i.saveData)(),this.playaduio("music/shengli"),this.roundOver(),this.rNum+=1,this.gameOver())},gameOver:function(){this.round.parent.removeChild(this.round),this.round=null,this.time.string=0,this.fenshu.string=0,this.regenerate=0,this.tipTime=0,this.bottleTime=0,this.num=0,this.line=[],this.Tips=[],this.propSort=[],this.click=[],this.node.getChildByName("\u74f6\u5b50\u548c\u677f\u5b50").children[2].children[0].active=!1,this.node.getChildByName("\u74f6\u5b50\u548c\u677f\u5b50").children[2].children[1].active=!0},doCountdownTime:function(){this.gameStop&&(this.time.string>0&&this.timeStop?(this.time.string-=1,this.tipTime+=1,this.bottleTime+=1,this.tipsTime()):0==this.time.string&&this.round&&(this.time.string=0,this.round&&(this.overNum=0,this.playaduio("music/shibai"),(0,i.setData)(this.popObj),(0,i.saveData)(),this.failOverRound(),this.gameOver())))},tishi:function(){for(var e=0,t=0;t<this.round.children.length;t++)if(this.hasQizi(this.round.children[t])){e++;for(var i=t+1;i<this.round.children.length;i++)if(this.hasQizi(this.round.children[i])&&"pg1"==this.round.children[t].name&&"pg1"==this.round.children[i].name&&this.islineLink(this.round.children[t],this.round.children[i]))return void(this.Tips=[this.round.children[t],this.round.children[i]])}0!=e&&this.resetTishi()},resetTishi:function(){if(2==this.Tips.length)this.Tips[0].getComponent("qizi").Light(!1),this.Tips[1].getComponent("qizi").Light(!1),this.Tips=[],this.line=[];else if(this.Tips.length<2){this.propSort.sort(function(){return Math.random()-.5});for(var e=0;e<this.round.children.length;e++)this.hasQizi(this.round.children[e])&&"line"!==this.round.children[e].name&&this.round.children[e].setPosition(this.propSort[e%this.propSort.length][0],this.propSort[e%this.propSort.length][1])}this.tishi()},tipsTime:function(){5==this.tipTime&&2==this.Tips.length&&(this.Tips[0].getComponent("qizi").Light(!0),this.Tips[1].getComponent("qizi").Light(!0))},onClick:function(e){var t=this;if(this.line=[],this.gameStop&&(e.getComponent("qizi").Light(!0),2==this.Tips.length&&1==this.Tips[0].children[0].active&&1==this.Tips[1].children[0].active&&(this.Tips[0].getComponent("qizi").Light(!1),this.Tips[1].getComponent("qizi").Light(!1),this.tipTime=0),this.click.push(e),2==this.click.length)){if(this.islineLink(this.click[0],this.click[1])){this.linkRoute(this.line),console.log(this.line);for(var i=function(e){var i=cc.instantiate(t.wiring);i.scaleX=.5,i.scaleY=.5,i.setParent(t.round),i.setPosition(t.click[e].x,t.click[e].y),i.active=!0,i.getComponent("sp.Skeleton").setAnimation(1,"xiaochu",!1),t.scheduleOnce(function(){i.parent.removeChild(i)},.2),t.click[e].parent.removeChild(t.click[e]),t.playaduio("music/xiaochu")},n=0;n<this.click.length;n++)i(n);this.num+=1,this.fenshu.string=this.num,this.regenerate++,this.time.string=parseInt(this.time.string)+1,this.bottleTime=this.bottleTime-1,this.tipTime=0,this.resetTishi()}this.click[0].getComponent("qizi").Light(!1),this.click[1].getComponent("qizi").Light(!1),this.click=[],this.line=[]}},pop:function(){var e=this.node;cc.resources.load("prefab/stopBoard",function(t,i){if(t)console.log(t);else if(i){var n=cc.instantiate(i);n.setParent(e),n.setPosition(n.x+80,n.y),this.bg_music?(n.children[3].children[1].children[1].active=!0,n.children[3].children[1].children[0].active=!1):(n.children[3].children[1].children[1].active=!1,n.children[3].children[1].children[0].active=!0),this.key?(n.children[3].children[0].children[1].active=!0,n.children[3].children[0].children[0].active=!1):(n.children[3].children[0].children[1].active=!1,n.children[3].children[0].children[0].active=!0),n.active=!0}}.bind(this))},roundOver:function(){var e=this.node;cc.resources.load("prefab/gameAdopt",function(t,i){if(t)console.log(t);else if(i){var n=cc.instantiate(i);n.setParent(e),n.setPosition(n.x+80,n.y),n.getComponent("popUp").overScore.string=e.getComponent("scene").overNum}})},failOverRound:function(){var e=this.node;cc.resources.load("prefab/gameFailAdopt",function(t,i){if(t)console.log(t);else if(i){var n=cc.instantiate(i);n.setParent(e),n.setPosition(n.x+80,n.y),n.getComponent("popUp").failOverScore.string=e.getComponent("scene").overNum}})}}),cc._RF.pop()},{"./numProp":"numProp"}],shopping:[function(e,t){"use strict";cc._RF.push(t,"5315fnk6QROirzrtx8H1VQD","shopping");var i=e("./numProp");cc.Class({extends:cc.Component,properties:{myScore:cc.Label,popNum:cc.Label,input:cc.Node,buyNum:{default:0,visible:!1},popFace:{default:null,visible:!1},textLabel:cc.Label,totalPrice:cc.Label,min:cc.Integer,max:cc.Integer},onLoad:function(){},start:function(){},update:function(){},marketUp:function(){},del:function(){var e=this.node.parent.getComponent("scene");e.playaduio("music/dianji"),e.gameStop=!0,this.node.parent.getChildByName("\u74f6\u5b50\u548c\u677f\u5b50").children[2].children[0].active=!0,this.node.parent.getChildByName("\u74f6\u5b50\u548c\u677f\u5b50").children[2].children[1].active=!1,this.node.parent.removeChild(this.node)},buyPop:function(e){var t=e.target.children[0]._components[0].spriteFrame;this.popFace=t;var n=this.node;this.node.parent.getComponent("scene").playaduio("music/dianji"),cc.resources.load("prefab/\u5151\u6362\u9762\u677f",function(e,o){if(e)console.log(e);else if(o){var s=cc.instantiate(o);s.setParent(n),s.setPosition(s.x,s.y),s.getChildByName("\u9053\u5177\u56fe").getComponent(cc.Sprite).spriteFrame=t,n.getChildByName("\u5151\u6362\u9762\u677f").getComponent("shopping").myScore.string=(0,i.getData)().score}})},duihuandel:function(){this.node.parent.parent.getComponent("scene").playaduio("music/dianji"),this.node.parent.removeChild(this.node)},jiahao:function(){if(this.popNum.string<200){this.node.parent.parent.getComponent("scene").playaduio("music/dianji");var e=this.popNum.string;e=parseInt(e)+1,this.popNum.string=e,this.buyNum=this.popNum.string,this.totalPrice.string=10*e}},jianhao:function(){if(this.popNum.string>0){this.node.parent.parent.getComponent("scene").playaduio("music/dianji");var e=this.popNum.string;e=parseInt(e)-1,this.popNum.string=e,this.buyNum=this.popNum.string,this.totalPrice.string=10*e}},queding:function(){if(10*this.buyNum<=(0,i.getData)().score)switch(this.node.parent.parent.getComponent("scene").playaduio("music/dianji"),this.node.parent.getComponent("shopping").popFace.name){case"djtb1":(0,i.getData)().score=(0,i.getData)().score-10*this.buyNum,(0,i.getData)().propTipNum=parseInt((0,i.getData)().propTipNum)+parseInt(this.buyNum),(0,i.saveData)(),this.node.parent.removeChild(this.node);break;case"djtb2":(0,i.getData)().score=(0,i.getData)().score-10*this.buyNum,(0,i.getData)().propLuanXuNum=parseInt((0,i.getData)().propLuanXuNum)+parseInt(this.buyNum),(0,i.saveData)(),this.node.parent.removeChild(this.node);break;case"djtb3":(0,i.getData)().score=(0,i.getData)().score-10*this.buyNum,(0,i.getData)().propBoomNum=parseInt((0,i.getData)().propBoomNum)+parseInt(this.buyNum),(0,i.saveData)(),this.node.parent.removeChild(this.node);break;case"djtb4":(0,i.getData)().score=(0,i.getData)().score-10*this.buyNum,(0,i.getData)().propTimeStopNum=parseInt((0,i.getData)().propTimeStopNum)+parseInt(this.buyNum),(0,i.saveData)(),this.node.parent.removeChild(this.node);break;case"djtb5":(0,i.getData)().score=(0,i.getData)().score-10*this.buyNum,(0,i.getData)().propTimeNum=parseInt((0,i.getData)().propTimeNum)+parseInt(this.buyNum),(0,i.saveData)(),this.node.parent.removeChild(this.node)}},popInput:function(){var e=this.textLabel.string;this.buyNum=e,this.totalPrice.string=10*e},inputChange:function(e){var t=this.input.getComponent(cc.EditBox);if(/^([0-9])([^\D]*)([0-9])$/g.test(e)){var i=parseInt(e);i>200?(this.textLabel.string=200,t.string=200):i<0?(this.textLabel.string=0,t.string=0):(this.textLabel.string=i,t.string=i)}else this.textLabel.string=0,t.string=0}}),cc._RF.pop()},{"./numProp":"numProp"}]},{},["bottle","kepu","loading","numProp","popUp","propWarehouse","qizi","scene","shopping"]);